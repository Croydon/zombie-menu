
// Zombie-Crew Apocalypse-Menu / config/script for Cube 2: Sauerbraten by the Zombie-Crew! xD (http://quadropolis.us/node/3716)
// Copyright (C) 2012 - 2013  meow of zombie-crew 
// Copyright (C) 2012 - 2013  cm|ac
// Copyright (C) 2012 - 2013  Mephisto|BD|
// Copyright (C) 2012 - 2013  Bucco
// Copyright (C) 2013  Imperator Chairman Miau
// Copyright (C) 2013  Kroltan
// 
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License
// as published by the Free Software Foundation; either version 2
// of the License, or (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// DESCRIPTION:
//
// Our zombie.cfg is a new menu on your (F7) key, that helps us answering frequently asked newbie questions as well as providing useful functions, mini-tutorials and settings for editing in-game. It's also designed to make Master being less nerve-wrecking! =P
// Please feel free to improve it, or tell us what you would like to add or change (texts, functions, anything!). It's free software either! :D
//
// Note: The functions #sendto X (master forces a /getmap onto player with CN X), and prior to Collect Edition, #givemaster X (hands master over to the player with CN X) need (e.g.) http://github.com/vampirefrog/frogmod-justice or http://code.google.com/p/remod-sauerbraten/ or http://github.com/amstan/hyperserv installed on the server. (frogmod and remod available under the free ZLIB license (similar to Sauerbraten original), hyperserv under ZLIB + GPL v2.
//

/// code below between 3 comment slashes (///) as there stated and written by their respective coder (and as with everything else inside this file also licensed under GPL v2, of course).

//TODO: Make isdef work correctly (ISDEF)

/// The First Great Refactor, by Kroltan
/// With the objective of creating a more agile and straightforward to program menu
/// Creates an API for internal functions and implements it as GUI later on. Will also create new commands for players who prefer typing to clicking
/// Will be split into 3 files: zombie.cfg (loader, initialization, etc), zombie-api.cfg (core macros and functionality) and zombie-panel.cfg (GUI and client commands)
/// Alias syntax: zSYNTAX for values, z.dot.syntax for commands

//Part of the refactored version of Zombie Menu, not compatible and useless with main version

// Main loader functions, they are discarded as soon as the loading finishes, and reimplemented in the API
// Why is that? To keep consistency and also discard possible unnecessary complexity on the loader functions
zLOADER = [
	local isdef tryset
	isdef = [ if (= (getalias $arg1) ()) [ result 0 ] [ result 1 ] ] //Checks if variable exists, () == null, so yeah
	tryset = [ if (! (isdef $@arg1)) [alias (concatword z $arg1) $arg2; result 1 ] [ result 0 ] ] //Tries setting a zVARIABLE
	//Pre-definitions, only if not defined previously (syncs between sessions)
	tryset GENDER 0
	tryset NNECHO 0
	tryset STEALTH 0
	tryset PORTALS 0
	tryset FLYJUMP 0
	tryset SILENCE 0
	tryset WINGS 1
	tryset CUSTOMWINGSL "???"
	tryset CUSTOMWINGSR "???"
	tryset WL "-~."
	tryset WR ".~-"
	tryset KILL 0
	tryset FM "sir"
	zPID1 = (+ 1900 (* 2 (getclientnum)))
	zPID2 = (+ 1900 (* 2 (getclientnum)))
	zPID3 =  (* 2 (getclientnum))
	//Backups
	tryset BKNAME getname
	tryset BKFLOATSPEED $floatspeed
	tryset BKGRIDPOWER $gridpower
	tryset BKDELTA_EDIT_0 = $delta_edit_0
	tryset BKDELTA_EDIT_2 = $delta_edit_2
	tryset BKDELTA_EDIT_3 = $delta_edit_3
	tryset BKMOUSE1 = (getbind MOUSE1)
	tryset BKMOUSE2 = (getbind MOUSE2)
	tryset BKMOUSE3 = (getbind MOUSE3)
	tryset BKE = (getbind E)
	tryset BKF = (getbind F)
	tryset BKJ = (getbind J)
	tryset BKK = (getbind K)
	tryset BKL = (getbind L)
	tryset BKM = (getbind M)
	tryset BKN = (getbind N)
	tryset BKNE = (geteditbind N)
	tryset BKB = (getbind B)
	tryset BKBE = (geteditbind B)
	tryset BKP = (getbind P)
	tryset BKPE = (geteditbind P)
	tryset BKLCTRLE = (geteditbind LCTRL)
	tryset BKLALT = (getbind LALT)
	tryset BKLALTE = (geteditbind LALT)
	exec "packages/zombie-crew/zombie-api.cfg"
]
zLOADER